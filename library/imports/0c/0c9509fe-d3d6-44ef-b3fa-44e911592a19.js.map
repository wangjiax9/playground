{"version":3,"sources":["../../../../../assets/script/cc/assets/script/cc/UiCC.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/script/cc","sourcesContent":["import GM from '../global/GM'\nimport { login } from '../api/Login'\nimport { godLv, godCn, roleTextureName } from '../utils/Const'\nimport { Sprite } from '../../../creator';\n\nconst { ccclass, property } = cc._decorator\n\n@ccclass\nexport default class UiCC extends cc.Component {\n  \n  /**\n   * 用户信息\n   */\n  @property(cc.Node)\n  private user: cc.Node = null\n   /**\n   * 角色\n   */\n  @property(cc.Node)\n  private role: cc.Node = null\n  /**\n   * 来源按钮\n   */\n  @property(cc.Node)\n  private btnSource: cc.Node = null\n  /**\n   * 回收按钮\n   */\n  @property(cc.Node)\n  private btnRecycle: cc.Node = null\n  /**\n   * 战斗按钮\n   */\n  @property(cc.Node)\n  private btnBattle: cc.Node = null\n\n  protected onLoad () {\n    this.initUserInfo()\n    this.eventHandle()\n  }\n  \n  /**\n   * 初始化用户信息\n   */\n  private initUserInfo() {\n    const userNode = cc.instantiate(GM.resManager.prefab.user)\n    this.node.addChild(userNode)\n    userNode.setPosition(0, 200)\n    GM.userNode = userNode\n\n    this.roleAnim()\n    const accountId = cc.find('user/name', this.node)\n    const godCamp = cc.find('user/godCamp/godCampLabel', this.node)\n    const lv = cc.find('user/lv/label', this.node)\n    const stPower = cc.find('user/power/st-num', this.node)\n    const dxPower = cc.find('user/power/dx-num', this.node)\n    const itPower = cc.find('user/power/it-num', this.node)\n    accountId.getComponent(cc.Label).string = GM.user.accountId\n    godCamp.getComponent(cc.Label).string = godCn(GM.user.godCamp)\n    lv.getComponent(cc.Label).string = 'LV: ' + godLv(GM.user.godLevel)\n    stPower.getComponent(cc.Label).string = GM.user.powerStrength.toFixed(1)\n    dxPower.getComponent(cc.Label).string = GM.user.powerDexterity.toFixed(1)\n    itPower.getComponent(cc.Label).string = GM.user.powerIntelligence.toFixed(1)\n  }\n  private roleAnim() {\n    this.role.getComponent(cc.Sprite).spriteFrame = GM.resManager.texture[roleTextureName(GM.user.godCamp)]\n    const ac = cc.repeatForever(\n      cc.sequence(\n        cc.moveBy(1, cc.v2(0, 20)),\n        cc.moveBy(1, cc.v2(0, -20)),\n      )\n    )\n    ac.easing(cc.easeInOut(2))\n    this.role.runAction(ac)\n  }\n  /**\n   * 事件处理\n   */\n  private eventHandle() {\n    this.btnSource.on(cc.Node.EventType.TOUCH_END, () => {\n      GM.dialog.showSource()\n    }, this)\n    this.btnRecycle.on(cc.Node.EventType.TOUCH_END, () => {\n      GM.dialog.showRecycle()\n    }, this)\n    this.btnBattle.on(cc.Node.EventType.TOUCH_END, () => {\n      GM.dialog.showBattle()\n    }, this)\n    // 来源关闭按钮\n    const closeNodeSource = cc.find('close', GM.dialog.dialogSource)\n    // 回收关闭按钮\n    const closeNodeRecycle = cc.find('close', GM.dialog.dialogRecycle)\n    closeNodeSource.on(cc.Node.EventType.TOUCH_END, () => {\n      GM.dialog.hideSource()\n    }, this)\n    closeNodeRecycle.on(cc.Node.EventType.TOUCH_END, () => {\n      GM.dialog.hideRecycle()\n    }, this)\n  }\n}"]}