window.__require=function e(t,o,n){function c(i,a){if(!o[i]){if(!t[i]){var u=i.split("/");if(u=u[u.length-1],!t[u]){var s="function"==typeof __require&&__require;if(!a&&s)return s(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+i+"'")}}var l=o[i]={exports:{}};t[i][0].call(l.exports,function(e){return c(t[i][1][e]||e)},l,l.exports,e,t,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)c(n[i]);return c}({Const:[function(e,t,o){"use strict";cc._RF.push(t,"f03cf7cZI9NfLNdOWyaL+96","Const"),Object.defineProperty(o,"__esModule",{value:!0}),o.godLv=function(e){switch(e){case 0:return"\u666e\u901a\u4fe1\u5f92";case 1:return"\u666e\u901a\u795e\u804c\u4eba\u5458";case 2:return"\u533a\u7ea7\u4e3b\u6559";case 3:return"\u5e02\u7ea7\u4e3b\u6559";case 4:return"\u7701\u7ea7\u4e3b\u6559";case 5:return"\u6218\u533a\u7ea7\u4e3b\u6559";case 6:return"\u56fd\u5bb6\u7ea7\u4e3b\u6559";case 7:return"\u4e16\u754c\u7ea7\u6559\u7687"}},o.godCn=function(e){switch(e){case"nature":return"\u81ea\u7136\u795e";case"chinese":return"\u5112\u91ca\u9053";case"hebrew":return"\u5e0c\u4f2f\u6765\u795e";case"shinto":return"\u795e\u9053\u6559"}},o.roleTextureName=function(e){switch(e){case"nature":return"role01";case"chinese":return"role02";case"hebrew":return"role03";case"shinto":return"role04"}},o.godCamp=function(e){switch(e){case"god01":return"nature";case"god02":return"chinese";case"god03":return"hebrew";case"god04":return"shinto"}},o.gameCn=function(e){switch(e){case"h48":return"\u795e\u90fd\u591c\u884c\u5f55";case"g37":return"\u9634\u9633\u5e08";default:return e}},o.powerTypeEx=function(e){switch(e){case"strength":return"powerStrength";case"dexterity":return"powerDexterity";case"intelligence":return"powerIntelligence"}},o.powerCn=function(e){switch(e){case"strength":return"\u529b\u91cf\u795e\u529b";case"dexterity":return"\u654f\u6377\u795e\u529b";case"intelligence":return"\u667a\u529b\u795e\u529b"}},cc._RF.pop()},{}],DialogBattleResult:[function(e,t,o){"use strict";cc._RF.push(t,"67e059kcM9MP7703fjurCFu","DialogBattleResult"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=cc._decorator,r=c.ccclass,i=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toBack=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.toBack.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.hideBattleResult()},this)},__decorate([i(cc.Node)],t.prototype,"toBack",void 0),t=__decorate([r],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../global/GM":"GM"}],DialogBattle:[function(e,t,o){"use strict";cc._RF.push(t,"8fda1nmbwpGi6Td2QlKWs6R","DialogBattle"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=cc._decorator,r=c.ccclass,i=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toBattle=null,t.BattleClose=null,t.isBattle=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.toBattle.on(cc.Node.EventType.TOUCH_END,function(){e.isBattle||(e.isBattle=!0,n.default.toast("\u6218\u6597\u4e2d\u2026\u2026"),e.schedule(function(){n.default.dialog.showBattleResult()},0,0,2))},this),this.BattleClose.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.hideBattle()},this)},__decorate([i(cc.Node)],t.prototype,"toBattle",void 0),__decorate([i(cc.Node)],t.prototype,"BattleClose",void 0),t=__decorate([r],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../global/GM":"GM"}],DialogJoinPray:[function(e,t,o){"use strict";cc._RF.push(t,"02e3aKFHcJGzp1Y447TGnSe","DialogJoinPray"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=e("../api/Index"),r=e("../utils/Const"),i=cc._decorator,a=i.ccclass,u=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item0=null,t.item1=null,t.item2=null,t.item3=null,t.btn=null,t.btnClose=null,t.devotePower=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.eventHandle()},t.prototype.eventHandle=function(){var e=this,t=n.default.resManager.texture["pray-b-active"];this.item0.on(cc.Node.EventType.TOUCH_END,function(){e.disableOtherItem(),e.devotePower=10,e.item0.getComponent(cc.Sprite).spriteFrame=t},this),this.item1.on(cc.Node.EventType.TOUCH_END,function(){e.disableOtherItem(),e.devotePower=20,e.item1.getComponent(cc.Sprite).spriteFrame=t},this),this.item2.on(cc.Node.EventType.TOUCH_END,function(){e.disableOtherItem(),e.devotePower=50,e.item2.getComponent(cc.Sprite).spriteFrame=t},this),this.item3.on(cc.Node.EventType.TOUCH_END,function(){e.disableOtherItem(),e.devotePower=100,e.item3.getComponent(cc.Sprite).spriteFrame=t},this),this.btn.on(cc.Node.EventType.TOUCH_END,function(){var t=n.default.user[r.powerTypeEx(n.default.joinPrayItem.powerType)];e.devotePower>t?n.default.toast("\u8be5\u7c7b\u578b\u795e\u529b\u4e0d\u8db3"):(e.joinPray(),e.btn.off(cc.Node.EventType.TOUCH_START,function(){},e),e.btn.off(cc.Node.EventType.TOUCH_END,function(){},e))},this),this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.hideJoinPray()},this)},t.prototype.disableOtherItem=function(){var e=n.default.resManager.texture["pray-b-nor"];this.item0.getComponent(cc.Sprite).spriteFrame=e,this.item1.getComponent(cc.Sprite).spriteFrame=e,this.item2.getComponent(cc.Sprite).spriteFrame=e,this.item3.getComponent(cc.Sprite).spriteFrame=e},t.prototype.joinPray=function(){var e=this,t={activityId:n.default.joinPrayItem.activityId,accountId:n.default.user.accountId,devotePower:this.devotePower};c.prayPower(t).then(function(t){var o=cc.find("progress-desc/count",n.default.joinPrayItemNode),c=cc.find("progress/bar",n.default.joinPrayItemNode),i=n.default.user[r.powerTypeEx(n.default.joinPrayItem.powerType)];i-=e.devotePower,o.getComponent(cc.Label).string=n.default.joinPrayItem.currentPower+e.devotePower,c.width=Math.round(500*(n.default.joinPrayItem.currentPower+e.devotePower)/n.default.joinPrayItem.totalPower),n.default.user[r.powerTypeEx(n.default.joinPrayItem.powerType)]=i,n.default.toast("\u7948\u7977\u6210\u529f\uff01"+r.powerCn(n.default.joinPrayItem.powerType)+" -"+e.devotePower),n.default.updateUserPower(),n.default.dialog.hideJoinPray()})},__decorate([u(cc.Node)],t.prototype,"item0",void 0),__decorate([u(cc.Node)],t.prototype,"item1",void 0),__decorate([u(cc.Node)],t.prototype,"item2",void 0),__decorate([u(cc.Node)],t.prototype,"item3",void 0),__decorate([u(cc.Node)],t.prototype,"btn",void 0),__decorate([u(cc.Node)],t.prototype,"btnClose",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../api/Index":"Index","../global/GM":"GM","../utils/Const":"Const"}],DialogManager:[function(e,t,o){"use strict";cc._RF.push(t,"e326fgF2OVBjLnt6ZlgRHuo","DialogManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.dialogLogin=null,this.dialogRoleSelect=null,this.dialogSource=null,this.dialogRecycle=null,this.dialogJoinPray=null,this.dialogBattle=null,this.dialogBattleResult=null}return e.prototype.showLogin=function(){this.dialogLogin.runAction(cc.fadeIn(.5))},e.prototype.hideLogin=function(){var e=cc.sequence(cc.delayTime(.5),cc.fadeOut(.5),cc.moveBy(0,cc.v2(1e3,0)));this.dialogLogin.runAction(e)},e.prototype.showRoleSelect=function(){var e=cc.sequence(cc.scaleTo(0,.1,.1),cc.moveTo(0,cc.v2(375,600)),cc.scaleTo(.5,1,1));e.easing(cc.easeOut(3)),this.dialogRoleSelect.runAction(e)},e.prototype.hideRoleSelect=function(){this.dialogRoleSelect.runAction(cc.fadeOut(.5))},e.prototype.showSource=function(){var e=cc.sequence(cc.moveTo(0,cc.v2(0,-800)),cc.moveBy(.2,cc.v2(0,800)));this.dialogSource.runAction(e)},e.prototype.hideSource=function(){this.dialogSource.runAction(cc.moveBy(.2,cc.v2(0,-800)))},e.prototype.showRecycle=function(){var e=cc.sequence(cc.moveTo(0,cc.v2(0,-800)),cc.moveBy(.2,cc.v2(0,800)));this.dialogRecycle.runAction(e)},e.prototype.hideRecycle=function(){this.dialogRecycle.runAction(cc.moveBy(.2,cc.v2(0,-800)))},e.prototype.showJoinPray=function(){var e=cc.sequence(cc.scaleTo(0,.1,.1),cc.moveTo(0,cc.v2(375,667)),cc.scaleTo(.5,1,1));e.easing(cc.easeOut(3)),this.dialogJoinPray.runAction(e)},e.prototype.hideJoinPray=function(){var e=cc.sequence(cc.scaleTo(0,.1,.1),cc.moveBy(.2,cc.v2(0,2e3)));this.dialogJoinPray.runAction(e)},e.prototype.showBattle=function(){var e=cc.sequence(cc.moveTo(0,cc.v2(0,-800)),cc.moveBy(.2,cc.v2(0,800)));this.dialogBattle.runAction(e)},e.prototype.hideBattle=function(){this.dialogBattle.runAction(cc.moveBy(.2,cc.v2(0,-800)))},e.prototype.showBattleResult=function(){var e=cc.sequence(cc.moveTo(0,cc.v2(-800,667)),cc.moveTo(.2,cc.v2(375,667)));this.dialogBattleResult.runAction(e)},e.prototype.hideBattleResult=function(){this.dialogBattleResult.runAction(cc.moveBy(.2,cc.v2(1e3,667)))},e}();o.default=n,cc._RF.pop()},{}],DialogRecycle:[function(e,t,o){"use strict";cc._RF.push(t,"3aca2T2nVBM3prbSSqFCJId","DialogRecycle"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=e("../api/Index"),r=e("../utils/Const"),i=cc._decorator,a=i.ccclass,u=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;c.fetchPrayList().then(function(t){e.buildPrayList(t)}).catch(function(e){cc.log(e)})},t.prototype.buildPrayList=function(e){var t=this;e.data.forEach(function(e){var o=cc.instantiate(n.default.resManager.prefab["recycle-item"]);cc.find("view/content",n.default.dialog.dialogRecycle).addChild(o),o.setPosition(74,-100);var c=cc.find("game-name",o),i=cc.find("content",o),a=cc.find("pray-btn",o),u=cc.find("progress/bar",o),s=cc.find("progress-desc/count",o),l=cc.find("progress-desc/total",o),d=cc.find("progress-desc/power1-ico",o),p=cc.find("progress-desc/power2-ico",o),f=null;"strength"===e.powerType?f=n.default.resManager.texture["power-st"]:"dexterity"===e.powerType?f=n.default.resManager.texture["power-dx"]:"intelligence"===e.powerType&&(f=n.default.resManager.texture["power-it"]),d.getComponent(cc.Sprite).spriteFrame=f,p.getComponent(cc.Sprite).spriteFrame=f,c.getComponent(cc.Label).string=r.gameCn(e.gameId),i.getComponent(cc.Label).string=e.prayDesc,s.getComponent(cc.Label).string=e.currentPower,l.getComponent(cc.Label).string=e.totalPower,u.width=Math.round(500*e.currentPower/e.totalPower),1===e.state?a.getComponent(cc.Sprite).spriteFrame=n.default.resManager.texture["pray-btn-gone"]:(e.isPray=!1,a.on(cc.Node.EventType.TOUCH_START,function(){e.isPray||a.runAction(cc.scaleTo(.2,.9,.9))},t),a.on(cc.Node.EventType.TOUCH_END,function(){e.isPray||(e.isPray=!0,a.runAction(cc.scaleTo(.2,1,1)),a.getComponent(cc.Sprite).spriteFrame=n.default.resManager.texture["pray-btn-gone"],a.off(cc.Node.EventType.TOUCH_START,function(){},t),a.off(cc.Node.EventType.TOUCH_END,function(){},t),n.default.joinPrayItem=e,n.default.joinPrayItemNode=o,n.default.dialog.showJoinPray())},t))})},t=__decorate([a],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../api/Index":"Index","../global/GM":"GM","../utils/Const":"Const"}],DialogSource:[function(e,t,o){"use strict";cc._RF.push(t,"49a29jOvQJJgLEKQwYoPmsu","DialogSource"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=e("../api/Index"),r=e("../utils/Const"),i=cc._decorator,a=i.ccclass,u=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this,t={accountId:n.default.user.accountId};c.fetchGainList(t).then(function(t){e.loadPrefab(t)}).catch(function(e){cc.log(e)})},t.prototype.loadPrefab=function(e){var t=this;cc.loader.loadRes("prefab/source-item",cc.Prefab,function(o,n){o?cc.error(o.message||o):n instanceof cc.Prefab&&t.buildResouce(e,n)})},t.prototype.buildResouce=function(e,t){var o=this;e.data.forEach(function(e){var c=cc.instantiate(t);cc.find("view/content",n.default.dialog.dialogSource).addChild(c),c.setPosition(74,-100);var i=cc.find("game-bg",c),a=cc.find("border-bg",c),u=(cc.find("content",c),cc.find("content/label",c)),s=cc.find("btn",c),l=cc.find("btn/label",c),d=null;d="h48"===e.gameId?n.default.resManager.texture["item-sdyxl-bg"]:"g37"===e.gameId?n.default.resManager.texture["item-yys-bg"]:n.default.resManager.texture["item-zszz-bg"],i.getComponent(cc.Sprite).spriteFrame=d,u.getComponent(cc.Label).string=e.content,l.getComponent(cc.Label).string=e.powerGain,1===e.status?(s.getComponent(cc.Sprite).spriteFrame=n.default.resManager.texture["got-btn"],l.getComponent(cc.Label).string=""):(e.isGain=!1,s.on(cc.Node.EventType.TOUCH_START,function(){e.isGain||s.runAction(cc.scaleTo(.2,.9,.9))},o),s.on(cc.Node.EventType.TOUCH_END,function(){if(!e.isGain){e.isGain=!0,s.runAction(cc.scaleTo(.2,1,1)),s.getComponent(cc.Sprite).spriteFrame=n.default.resManager.texture["got-btn"],l.getComponent(cc.Label).string="",s.off(cc.Node.EventType.TOUCH_START,function(){},o),s.off(cc.Node.EventType.TOUCH_END,function(){},o),a.getComponent(cc.Sprite).spriteFrame=n.default.resManager.texture["source-border-disabled"];var t=n.default.user[r.powerTypeEx(e.powerType)];t+=e.powerGain,n.default.user[r.powerTypeEx(e.powerType)]=t,n.default.toast(r.powerCn(e.powerType)+" +"+e.powerGain),n.default.updateUserPower(),o.getPower(e)}},o))})},t.prototype.getPower=function(e){var t={accountId:n.default.user.accountId,gainId:e.gainId,gameId:e.gameId,powerGain:e.powerGain,powerType:e.powerType};c.gainPower(t).then(function(e){cc.log("\u83b7\u53d6\u795e\u529b\u6210\u529f\uff01")})},t=__decorate([a],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../api/Index":"Index","../global/GM":"GM","../utils/Const":"Const"}],GM:[function(e,t,o){"use strict";cc._RF.push(t,"1365afd9Q9KSYaewiDhKfxn","GM"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ResManager"),c=e("./DialogManager"),r=function(){function e(){this.resManager=null,this.dialog=null,this.toastNode=null,this.isLogin=!1,this.user={},this.userNode=null,this.joinPrayItem={},this.joinPrayItemNode=null,this.init()}return e.getInstance=function(){return this.instance instanceof this==!1&&(this.instance=new this),this.instance},e.prototype.init=function(){this.resManager=new n.default,this.dialog=new c.default},e.prototype.switchScene=function(e){cc.director.loadScene(e)},e.prototype.setUser=function(e){this.user=e.data},e.prototype.updateUserPower=function(){var e=cc.find("power/st-num",this.userNode),t=cc.find("power/dx-num",this.userNode),o=cc.find("power/it-num",this.userNode);e.getComponent(cc.Label).string=this.user.powerStrength.toFixed(1),t.getComponent(cc.Label).string=this.user.powerDexterity.toFixed(1),o.getComponent(cc.Label).string=this.user.powerIntelligence.toFixed(1)},e.prototype.toast=function(e){cc.find("msg",this.toastNode).getComponent(cc.Label).string=e;var t=cc.sequence(cc.fadeIn(0),cc.scaleTo(0,.1,.1),cc.moveTo(0,cc.v2(0,200)),cc.scaleTo(.5,1,1),cc.delayTime(1.5),cc.fadeOut(.5),cc.moveTo(0,cc.v2(800,800)));t.easing(cc.easeOut(3)),this.toastNode.runAction(t),cc.log(this.toastNode)},e}();o.default=r.getInstance(),cc._RF.pop()},{"./DialogManager":"DialogManager","./ResManager":"ResManager"}],GameWorld:[function(e,t,o){"use strict";cc._RF.push(t,"05d75yM6bRLD5RI44gdYD9x","GameWorld"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=cc._decorator,r=c.ccclass,i=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogSource=null,t.dialogRecycle=null,t.dialogJoinPray=null,t.dialogBattle=null,t.dialogBattleResult=null,t}return __extends(t,e),t.prototype.onLoad=function(){n.default.dialog.dialogSource=this.dialogSource,n.default.dialog.dialogRecycle=this.dialogRecycle,n.default.dialog.dialogJoinPray=this.dialogJoinPray,n.default.dialog.dialogBattle=this.dialogBattle,n.default.dialog.dialogBattleResult=this.dialogBattleResult,n.default.toastNode=cc.instantiate(n.default.resManager.prefab.toast),this.node.addChild(n.default.toastNode),n.default.toastNode.setPosition(2e3,0)},__decorate([i(cc.Node)],t.prototype,"dialogSource",void 0),__decorate([i(cc.Node)],t.prototype,"dialogRecycle",void 0),__decorate([i(cc.Node)],t.prototype,"dialogJoinPray",void 0),__decorate([i(cc.Node)],t.prototype,"dialogBattle",void 0),__decorate([i(cc.Node)],t.prototype,"dialogBattleResult",void 0),t=__decorate([r],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../global/GM":"GM"}],GodSelection:[function(e,t,o){"use strict";cc._RF.push(t,"f634fIkQJNB0oXnL0pn9Zo6","GodSelection"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=cc._decorator,r=c.ccclass,i=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.border=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.border=cc.find("border",this.node),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchStart=function(e){this.border.runAction(cc.fadeIn(.2));var t=cc.repeatForever(cc.sequence(cc.scaleTo(1,1.02,1.02),cc.scaleTo(1,.99,.99)));t.easing(cc.easeInOut(2)),this.border.runAction(t)},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){var t=e.target;n.default.user.role=t.name},t=__decorate([r],t)}(cc.Component));o.default=i,cc._RF.pop()},{"../global/GM":"GM"}],Http:[function(e,t,o){"use strict";cc._RF.push(t,"6e3d7LdvvNN/LuqksnkPeIJ","Http"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.getInstance=function(){return this.instance instanceof this==!1&&(this.instance=new this),this.instance},e.prototype.request=function(e){return new Promise(function(t,o){var n=cc.loader.getXMLHttpRequest();n.open(e.method,"https://easy-mock.com/mock/5c191e7313c0eb6355d2efec"+e.url),n.timeout=5e3,n.setRequestHeader("Content-type","application/json"),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e=JSON.parse(n.responseText);t(e)}};var c=e.data?JSON.stringify(e.data):"";n.send(c)})},e}();o.default=n.getInstance(),cc._RF.pop()},{}],Index:[function(e,t,o){"use strict";cc._RF.push(t,"80962S6eHlATb9Oab5QxnZu","Index"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/Http");o.fetchGainList=function(e){return n.default.request({url:"/gain/list",method:"post",data:e})},o.gainPower=function(e){return n.default.request({url:"/gain/power",method:"post",data:e})},o.fetchPrayList=function(){return n.default.request({url:"/pray/list",method:"get"})},o.prayPower=function(e){return n.default.request({url:"/pray/join",method:"post",data:e})},cc._RF.pop()},{"../utils/Http":"Http"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"81514WXKFdLm4R0WfMFNjF9","Loading"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=cc._decorator,r=c.ccclass,i=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress=null,t.isSwitching=!1,t}return __extends(t,e),t.prototype.onLoad=function(){n.default.resManager.load()},t.prototype.update=function(){n.default.resManager.getCurPer()<100&&(this.progress.getComponent(cc.Label).string=n.default.resManager.getCurPer()+"%"),n.default.resManager.getCurPer()>=100&&!this.isSwitching&&(this.isSwitching=!0,n.default.switchScene("login"))},__decorate([i(cc.Node)],t.prototype,"progress",void 0),t=__decorate([r],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../global/GM":"GM"}],LoginDialog:[function(e,t,o){"use strict";cc._RF.push(t,"af4c4kAfjdEuLAVYTBpx1t8","LoginDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=e("../api/Login"),r=e("../utils/Const"),i=cc._decorator,a=i.ccclass,u=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.dialogLogin=null,t.dialogRoleSelect=null,t.usernameEdit=null,t.passwordEdit=null,t.loginBtn=null,t.accountId="",t.pwd="",t.godCamp="",t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;n.default.dialog.dialogLogin=this.dialogLogin,n.default.dialog.dialogRoleSelect=this.dialogRoleSelect,this.roleSelectHandle(),this.loginBtn.getComponent(cc.Button).node.on("click",function(){e.accountId=e.usernameEdit.getComponent(cc.EditBox).string,e.pwd=e.passwordEdit.getComponent(cc.EditBox).string;var t={accountId:e.accountId,pwd:e.pwd};c.login(t).then(function(t){cc.log(t.data.godCamp),t.data.godCamp?(n.default.setUser(t),e.schedule(function(){n.default.switchScene("main")},0,0,1)):(cc.log("need register"),n.default.dialog.hideLogin(),e.schedule(function(){e.title.active=!1,n.default.dialog.showRoleSelect()},0,0,1))})},this)},t.prototype.onDisable=function(){var e=cc.fadeOut(1);this.node.runAction(e)},t.prototype.roleSelectHandle=function(){var e=this;this.dialogRoleSelect.on(cc.Node.EventType.TOUCH_MOVE,function(){var t=cc.find("view/content/god01/border",e.dialogRoleSelect),o=cc.find("view/content/god02/border",e.dialogRoleSelect),n=cc.find("view/content/god03/border",e.dialogRoleSelect),c=cc.find("view/content/god04/border",e.dialogRoleSelect);t.runAction(cc.fadeOut(.2)),o.runAction(cc.fadeOut(.2)),n.runAction(cc.fadeOut(.2)),c.runAction(cc.fadeOut(.2))},this),cc.find("btn",this.dialogRoleSelect).on(cc.Node.EventType.TOUCH_END,function(){e.toRegister()},this)},t.prototype.toRegister=function(){var e=this,t={accountId:this.accountId,pwd:this.pwd,godCamp:r.godCamp(n.default.user.role)};c.register(t).then(function(t){cc.log("\u9009\u62e9\u89d2\u8272"+n.default.user.role),n.default.setUser(t),e.schedule(function(){n.default.switchScene("main")},0,0,1)})},__decorate([u(cc.Node)],t.prototype,"title",void 0),__decorate([u(cc.Node)],t.prototype,"dialogLogin",void 0),__decorate([u(cc.Node)],t.prototype,"dialogRoleSelect",void 0),__decorate([u(cc.Node)],t.prototype,"usernameEdit",void 0),__decorate([u(cc.Node)],t.prototype,"passwordEdit",void 0),__decorate([u(cc.Node)],t.prototype,"loginBtn",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../api/Login":"Login","../global/GM":"GM","../utils/Const":"Const"}],Login:[function(e,t,o){"use strict";cc._RF.push(t,"ea01cKb28xHHa2REOZ4bFjv","Login"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/Http");o.login=function(e){return n.default.request({url:"/login",method:"post",data:e})},o.register=function(e){return n.default.request({url:"/register",method:"post",data:e})},cc._RF.pop()},{"../utils/Http":"Http"}],ResManager:[function(e,t,o){"use strict";cc._RF.push(t,"f77acl4bCZI6IsobV1Fm008","ResManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.dragonRoot="dragon-bones",this.prefab={},this.texture={},this.perArr=[],this.weightPrefab=.5,this.weightTexture=.5,this.weightDragon=.5}return e.prototype.loadPrefab=function(){var e=this,t=this;cc.loader.loadResDir("prefab",function(e,o){var n=Math.round(e/o*100);t.perArr[0]=n*t.weightPrefab},function(t,o){t?cc.error(t.message||t):o.forEach(function(t){t instanceof cc.Prefab&&(e.prefab[t.name]=t)})})},e.prototype.loadTexture=function(){var e=this,t=this;cc.loader.loadResDir("texture",function(e,o){var n=Math.round(e/o*100);t.perArr[1]=n*t.weightTexture},function(t,o){t?cc.error(t.message||t):o.forEach(function(t){t instanceof cc.SpriteFrame&&(e.texture[t.name]=t)})})},e.prototype.loadDragonBones=function(){var e=this;cc.loader.loadResDir("dragon-bones/dragon",function(t,o){var n=Math.round(t/o*100);e.perArr[2]=n*e.weightDragon},function(e,t){e?cc.error(e.message||e):cc.log(t)})},e.prototype.load=function(){this.loadPrefab(),this.loadTexture()},e.prototype.getCurPer=function(){if(!(this.perArr.length<1))return this.perArr.reduce(function(e,t){return e+t})},e}();o.default=n,cc._RF.pop()},{}],UiCC:[function(e,t,o){"use strict";cc._RF.push(t,"0c950n+09ZE77P6ROkRWSoZ","UiCC"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../global/GM"),c=e("../utils/Const"),r=cc._decorator,i=r.ccclass,a=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.user=null,t.role=null,t.btnSource=null,t.btnRecycle=null,t.btnBattle=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initUserInfo(),this.eventHandle()},t.prototype.initUserInfo=function(){var e=cc.instantiate(n.default.resManager.prefab.user);this.node.addChild(e),e.setPosition(0,200),n.default.userNode=e,this.roleAnim();var t=cc.find("user/name",this.node),o=cc.find("user/godCamp/godCampLabel",this.node),r=cc.find("user/lv/label",this.node),i=cc.find("user/power/st-num",this.node),a=cc.find("user/power/dx-num",this.node),u=cc.find("user/power/it-num",this.node);t.getComponent(cc.Label).string=n.default.user.accountId,o.getComponent(cc.Label).string=c.godCn(n.default.user.godCamp),r.getComponent(cc.Label).string="LV: "+c.godLv(n.default.user.godLevel),i.getComponent(cc.Label).string=n.default.user.powerStrength.toFixed(1),a.getComponent(cc.Label).string=n.default.user.powerDexterity.toFixed(1),u.getComponent(cc.Label).string=n.default.user.powerIntelligence.toFixed(1)},t.prototype.roleAnim=function(){this.role.getComponent(cc.Sprite).spriteFrame=n.default.resManager.texture[c.roleTextureName(n.default.user.godCamp)];var e=cc.repeatForever(cc.sequence(cc.moveBy(1,cc.v2(0,20)),cc.moveBy(1,cc.v2(0,-20))));e.easing(cc.easeInOut(2)),this.role.runAction(e)},t.prototype.eventHandle=function(){this.btnSource.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.showSource()},this),this.btnRecycle.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.showRecycle()},this),this.btnBattle.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.showBattle()},this);var e=cc.find("close",n.default.dialog.dialogSource),t=cc.find("close",n.default.dialog.dialogRecycle);e.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.hideSource()},this),t.on(cc.Node.EventType.TOUCH_END,function(){n.default.dialog.hideRecycle()},this)},__decorate([a(cc.Node)],t.prototype,"user",void 0),__decorate([a(cc.Node)],t.prototype,"role",void 0),__decorate([a(cc.Node)],t.prototype,"btnSource",void 0),__decorate([a(cc.Node)],t.prototype,"btnRecycle",void 0),__decorate([a(cc.Node)],t.prototype,"btnBattle",void 0),t=__decorate([i],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../global/GM":"GM","../utils/Const":"Const"}]},{},["Index","Login","DialogBattle","DialogBattleResult","DialogJoinPray","DialogRecycle","DialogSource","GameWorld","GodSelection","Loading","LoginDialog","UiCC","DialogManager","GM","ResManager","Const","Http"]);